# æµ‹è¯•ç¨‹åºè¯´æ˜

é¡¹ç›®åŒ…å«ä¸¤ä¸ªæµ‹è¯•ç¨‹åºï¼š

## 1. simple_test.exeï¼ˆæ¨èä½¿ç”¨ï¼‰

**ç‰¹ç‚¹**ï¼š
- âœ… è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€äº¤äº’
- âœ… ä¾æ¬¡æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- âœ… æ¸…æ™°çš„è¿›åº¦è¾“å‡º
- âœ… æ¯ä¸ªæµ‹è¯• 2-3 ç§’

**è¿è¡Œæ–¹å¼**ï¼š
```bash
cd Release
.\simple_test.exe
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
========================================
Taskbar Lyrics - Simple Test
========================================

[*] Loading native.dll...
[+] DLL loaded successfully!

[*] Getting SetLyric function...
[+] SetLyric found

[*] Getting SetConfig function...
[+] SetConfig found

[*] Initializing window (wait 2 seconds)...
[+] Window initialized!

========================================
Test 1: Basic Lyrics
========================================

[+] Displayed: Welcome to Taskbar Lyrics!
[*] Waiting 3 seconds...

... (ç»§ç»­è¾“å‡ºå…¶ä»–æµ‹è¯•)

========================================
All Tests Completed Successfully!
========================================

[SUCCESS] All features working correctly!
```

**æµ‹è¯•å†…å®¹**ï¼š
1. åŸºç¡€æ­Œè¯æ˜¾ç¤º
2. å¤§çº¢è‰²åŠ ç²—æ–‡å­—
3. é»„è‰²æ–‡å­—
4. ç»¿è‰²æ–‡å­—
5. è“è‰²æ–‡å­—
6. æ¢å¤é»˜è®¤é…ç½®

**æŒ‰ Ctrl+C é€€å‡º**

---

## 2. test_dll.exeï¼ˆäº¤äº’å¼èœå•ï¼‰

**ç‰¹ç‚¹**ï¼š
- ğŸ® äº¤äº’å¼èœå•é€‰æ‹©
- ğŸ“‹ 8 ä¸ªä¸åŒçš„æµ‹è¯•åœºæ™¯
- ğŸ”„ å¯é‡å¤æµ‹è¯•

**è¿è¡Œæ–¹å¼**ï¼š
```bash
cd Release
.\test_dll.exe
```

**ä½¿ç”¨æµç¨‹**ï¼š
```
========================================
ä»»åŠ¡æ æ­Œè¯ - æµ‹è¯•ç¨‹åº
========================================

è¯·é€‰æ‹©æµ‹è¯•åœºæ™¯ï¼š

  1. é»˜è®¤é…ç½®
  2. å¤§å­—å·æ˜¾ç¤º
  3. çº¢è‰²æ˜¾ç¤º
  4. å·¦å¯¹é½
  5. å±…ä¸­å¯¹é½
  6. å³å¯¹é½
  7. å‰¯æ­Œè¯æ˜¾ç¤º
  8. è‡ªå®šä¹‰å­—ä½“
  0. é€€å‡ºç¨‹åº

è¾“å…¥é€‰é¡¹ (0-8): 
```

**ç‰¹ç‚¹**ï¼š
- è¾“å…¥åºå·é€‰æ‹©æµ‹è¯•
- æ¯ä¸ªæµ‹è¯•å¾ªç¯æ˜¾ç¤º 3 è¡Œæ­Œè¯
- æ¯è¡Œæ˜¾ç¤º 3 ç§’
- æµ‹è¯•å®Œåè¿”å›èœå•
- è¾“å…¥ 0 é€€å‡º

---

## å¦‚æœç¨‹åºå¡ä½äº†

å¦‚æœè¿è¡Œæ—¶å¡ä½ï¼Œå¯èƒ½çš„åŸå› ï¼š

### 1. DLL åŠ è½½å¤±è´¥
- ç¡®ä¿ç¼–è¯‘äº†ä¸»é¡¹ç›®ï¼š`cd ../../build && cmake --build . --config Release`
- æ£€æŸ¥ native.dll æ˜¯å¦å­˜åœ¨äº `build/Release/` ç›®å½•

### 2. çª—å£åˆå§‹åŒ–å¤±è´¥
- ç¡®ä¿ä½¿ç”¨ Windows 10 æˆ– Windows 11
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ä»»åŠ¡æ è½¯ä»¶
- å°è¯•é‡å¯èµ„æºç®¡ç†å™¨ï¼ˆwin+shift+escï¼‰

### 3. ç¨‹åºå“åº”ç¼“æ…¢
- è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º DirectComposition åˆå§‹åŒ–éœ€è¦æ—¶é—´
- é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦ 2-3 ç§’
- è¯·è€å¿ƒç­‰å¾…

---

## ç¼–è¯‘æµ‹è¯•ç¨‹åº

### ä»å¤´ç¼–è¯‘

```bash
# ç¡®ä¿å·²ç¼–è¯‘ä¸»é¡¹ç›®
cd ../build
cmake --build . --config Release

# ç¼–è¯‘æµ‹è¯•ç¨‹åº
cd ../test
mkdir build
cd build
cmake -G Ninja ..
cmake --build . --config Release
```

### å¿«é€Ÿé‡æ–°ç¼–è¯‘

```bash
cd build
cmake --build . --config Release
```

---

## è¾“å‡ºæ–‡ä»¶ä½ç½®

```
test/
â”œâ”€â”€ build/
â”‚   â””â”€â”€ Release/
â”‚       â”œâ”€â”€ simple_test.exe      â† ç®€å•æµ‹è¯•ï¼ˆæ¨èï¼‰
â”‚       â”œâ”€â”€ test_dll.exe         â† äº¤äº’å¼æµ‹è¯•
â”‚       â””â”€â”€ native.dll           â† è‡ªåŠ¨å¤åˆ¶çš„ DLL
â”œâ”€â”€ test_dll.cpp                 â† äº¤äº’å¼æµ‹è¯•æºç 
â”œâ”€â”€ simple_test.cpp              â† ç®€å•æµ‹è¯•æºç 
â””â”€â”€ README.md                    â† æœ¬æ–‡ä»¶
```

---

## å¸¸è§é”™è¯¯ä¿¡æ¯

### "[!] Failed to load native.dll from current directory"
**åŸå› **: æ‰¾ä¸åˆ° native.dll
**è§£å†³**: 
1. ç¼–è¯‘ä¸»é¡¹ç›®ï¼š`cd ../../build && cmake --build . --config Release`
2. é‡æ–°ç¼–è¯‘æµ‹è¯•ï¼š`cd ../test/build && cmake --build .`

### "[!] Failed to get SetLyric"
**åŸå› **: SetLyric å‡½æ•°å¯¼å‡ºæœ‰é—®é¢˜
**è§£å†³**: 
1. æ£€æŸ¥ DLL æ˜¯å¦æ­£ç¡®ç¼–è¯‘
2. ä½¿ç”¨ DependencyWalker æŸ¥çœ‹å¯¼å‡ºå‡½æ•°

### ç¨‹åºæ˜¾ç¤º DLL åŠ è½½æˆåŠŸä½†æ²¡æœ‰å…¶ä»–è¾“å‡º
**åŸå› **: çª—å£åˆå§‹åŒ–ä¸­ï¼Œéœ€è¦ç­‰å¾…
**è§£å†³**: ç­‰å¾… 2-3 ç§’ï¼Œæˆ–æŒ‰ Ctrl+C ä¸­æ–­

---

## å¦‚ä½•åœ¨ä»»åŠ¡æ çœ‹åˆ°æ­Œè¯

1. è¿è¡Œ `simple_test.exe` æˆ– `test_dll.exe`
2. çœ‹ä»»åŠ¡æ ï¼ˆå±å¹•æœ€ä¸‹æ–¹ï¼‰
3. æ­Œè¯åº”è¯¥æ˜¾ç¤ºåœ¨ä»»åŠ¡æ çš„å·¦ä¾§æˆ–ä¸­é—´åŒºåŸŸ
4. æ ¹æ®é…ç½®æ˜¾ç¤ºä¸åŒçš„é¢œè‰²ã€å¤§å°ã€å¯¹é½æ–¹å¼

### å¦‚æœçœ‹ä¸åˆ°æ­Œè¯

- æ£€æŸ¥ä»»åŠ¡æ æ˜¯å¦å¯è§ï¼ˆCtrl+Alt+Delete -> ä»»åŠ¡ç®¡ç†å™¨ -> æ–‡ä»¶ -> è¿è¡Œæ–°ä»»åŠ¡ -> explorer.exeï¼‰
- æ£€æŸ¥æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡æ˜¯å¦å¤ªå°
- å°è¯•åœ¨çª—å£ä¸­å¢åŠ å­—ä½“å¤§å°ï¼š`setConfig("size_primary", "32")`

---

## ä»£ç ç¤ºä¾‹

### åœ¨ä½ çš„ç¨‹åºä¸­ä½¿ç”¨

```cpp
#include <Windows.h>

typedef void (*SetLyricFunc)(const wchar_t*);
typedef void (*SetConfigFunc)(const char*, const char*);

int main() {
    // åŠ è½½ DLL
    HMODULE dll = LoadLibrary(L"native.dll");
    
    auto setLyric = (SetLyricFunc)GetProcAddress(dll, "SetLyric");
    auto setConfig = (SetConfigFunc)GetProcAddress(dll, "SetConfig");
    
    // é…ç½®
    setConfig("size_primary", "24");
    setConfig("color_primary", "0xFFFF0000");  // çº¢è‰²
    
    // æ˜¾ç¤ºæ­Œè¯
    setLyric(L"ä½ çš„æ­Œè¯");
    
    // ä¿æŒè¿è¡Œ
    Sleep(5000);
    
    return 0;
}
```

---

## è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹ `../API_REFERENCE.md` äº†è§£å®Œæ•´ API
- ğŸš€ æŸ¥çœ‹ `../QUICK_START.md` å¿«é€Ÿå¼€å§‹
- ğŸ”„ æŸ¥çœ‹ `../MIGRATION_GUIDE.md` è¿ç§»æŒ‡å—

---

**ç¥ä½ æµ‹è¯•æ„‰å¿«ï¼** ğŸ‰
